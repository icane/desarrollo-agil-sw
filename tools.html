 <!doctype html>
<html lang="en">

    <head>
        <meta charset="utf-8">

        <title>Desarrollo ágil de Software - CEARC 2015</title>

        <meta name="description" content="Curso de Desarrollo Ágil de Software para el Centro de Estudios de la Administración Pública Regional de Cantabria">
        <meta name="author" content="Miguel Expósito Martín">

        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

        <link rel="stylesheet" href="css/reveal.css">
        <link rel="stylesheet" href="css/theme/white.css" id="theme">

        <!-- Code syntax highlighting -->
        <link rel="stylesheet" href="lib/css/zenburn.css">

        <!-- Printing and PDF exports -->
        <script>
            var link = document.createElement( 'link' );
            link.rel = 'stylesheet';
            link.type = 'text/css';
            link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
            document.getElementsByTagName( 'head' )[0].appendChild( link );
        </script>

        <!--[if lt IE 9]>
        <script src="lib/js/html5shiv.js"></script>
        <![endif]-->
    </head>

    <body>
<div>
<a href="./index.html#/1"><img alt="índice" src="./img/i.png"></a>
</div>
        <div class="reveal">

            <!-- Any section element inside of this container is displayed as a slide -->
            <div class="slides">
                <section data-markdown>
#otras herramientas pragmáticas y conceptos ágiles
                </section>
                <section>
                <section data-markdown>
                <script type="text/template">
## microservices
>&ldquo;un enfoque para desarrollar una única aplicación como una suite de pequeños servicios, cada uno ejecutándose en su propio proceso y comunicándose a través de mecanismos ligeros (generalmente, una API de recursos HTTP)&rdquo;

- se construyen en torno a funcionalidad
- se despliegan de manera independiente
- están construidos en distintas tecnologías y utilizan diferentes tecnologías de almacenamiento

<small>fuente: [Fowler](http://martinfowler.com/articles/microservices.html)</small>

                </script>
                </section>
 <section data-markdown >
                <script type="text/template">
## sistemas monolíticos
cliente + backend + base de datos

####cualquier cambio en el sistema implica construir y desplegar una nueva versión del backend

- a veces se hace difícil mantener una estructura modular
- el escalado, de necesitarse, se aplica a todo el sistema y no a la parte que requiere más recursos
                </script>
                </section>
<section data-markdown>
                <script type="text/template">
![microservices](./img/microservices.png)

<small>fuente: [Fowler](http://martinfowler.com/articles/microservices.html)</small>
                </script>
                </section>
<section data-markdown>
 <script type="text/template">
## servicios como componentes

- componentes: unidad de software independiemente reemplazable y actualizable
- biblioteca: componentes enlazados en un programa y llamados usando llamadas a funciones en memoria
- servicios: componentes fuera del proceso que se comunican con mecanismos como peticiones a servicios web o RPC

####utilizar servicios como componentes permite poder desplegarlos de manera independiente

</script>
</section>

 <section data-markdown>
                <script type="text/template">
## organización según el negocio
equipos multi-funcionales con las habilidades necesarias para el desarrollo, la experiencia del usuario, la gestión del proyecto, las bases de datos...

evitar la [Ley de Conway](http://www.melconway.com/Home/Committees_Paper.html):

>&ldquo;cualquier organización que diseña un sistema (definido de forma amplia) producirá un diseño cuya estructura es una copia de la estructura de comunicación de la organización&rdquo;
                </script>
                </section>
<section data-markdown>
                <script type="text/template">
![silos](./img/silos.png)

<small>fuente: [Fowler](http://martinfowler.com/articles/microservices.html)</small>
                </script>
                </section>
<section data-markdown>
                <script type="text/template">
![cross functional teams](./img/crossf.png)

<small>fuente: [Fowler](http://martinfowler.com/articles/microservices.html)</small>
                </script>
                </section>
<section data-markdown>
                <script type="text/template">
## productos, no proyectos
**modelo de proyecto**: se entrega el software cuando se considera completo, delegando la responsabilidad al equipo de mantenimiento. El equipo de desarrollo se desmantela.

**modelo de producto**: el equipo de desarrollo asume plena responsabilidad también cuando el software está en producción. Esto les lleva a un contacto diario con el software y sus usuarios.

####el software se convierte en una relación viva

                </script>
                </section>
<section data-markdown>
                <script type="text/template">
##comunicación sencilla
frente a los ESB, que incluyen sofisticados sistemas de enrutado, coreografía, transformación, reglas de negocio, etc...

####microservicios desacoplados y coherentes, usando HTTP

- end-point inteligente
- "tuberías tontas"
                </script>
                </section>
<section data-markdown>
                <script type="text/template">
##gobernanza descentralizada
para cada problema, su solución: no todo es un clavo y no todo es un martillo

en vez de un catálogo centralizado de estándares en una tecnología única, un catálogo de herramientas útiles para que otros desarrolladores puedan resolver problemas similares

ejemplos: Netflix, Amazon...

                </script>
                </section>
<section data-markdown>
                <script type="text/template">
###gestión de datos descentralizada
![decentralized data](./img/ddata.png)

<small>fuente: [Fowler](http://martinfowler.com/articles/microservices.html)</small>
                </script>
                </section>
<section data-markdown>
                <script type="text/template">
##otras
- entrega continua, integración continua
- ejecución automática de tests y despliegue
- diseño tolerante a fallos
- diseño evolutivo
                </script>
                </section>
<section data-markdown>
                <script type="text/template">
####¿un servidor para cada microservicio?

no necesariamente...

usar servidores empotrados permite una mayor automatización, despliegues más rápidos y menor esfuerzo de mantenimiento
                </script>
                </section>
<section data-markdown>
                <script type="text/template">
##contras
- impacto en rendimiento debido al overhead HTTP, de red y de serialización
- heterogeneidad e interacciones complejas
- gestión de dependencias
- necesidad de mantener un registro de servicios

                </script>
                </section>
                </section>
<section>
                <section data-markdown>
                <script type="text/template">
## devops
>participación conjunta de equipos de operaciones (sistemas) y desarrollo en todo el ciclo de vida del servicio, desde su concepción y diseño, pasando por el proceso de desarrollo y hasta el mantenimiento del mismo

comparten los **mismos valores** que el manifiesto ágil

                </script>
                </section>
 <section data-markdown>
                <script type="text/template">
## el horror de sistemas
>esta aplicación no se desplegará en nuestra infraestructura porque... {está obsoleta, no tenemos capacidad suficiente, no damos soporte a esa versión}

<!-- .element: class="fragment" data-fragment-index="1" -->

>la arquitectura de esta aplicación no cumple con nuestro modelo de {red, almacenamiento, seguridad}

<!-- .element: class="fragment" data-fragment-index="2" -->

                </script>
                </section>
                <section data-markdown data-markdown>
                <script type="text/template">
##principios
- cultura, simplicidad, automatización, mejora continua

###infrastructure as code

escribir código para gestionar configuración y provisión automática de infraestructura y despliegues

####no se trata sólo de scripts

- control de versiones, testing, patrones de diseño...
                </script>
                </section>
 <section data-markdown>
                <script type="text/template">
## herramientas
- las propias del desarrollo ágil: scrum, kanban
- propias de operaciones: virtualización, cloud
- de despliegue: jenkins, travis
- de gestión de configuración: puppet, chef, ansible
- de uso de contenedores: docker, vagrant, AWS, openstack
                </script>
                </section>
 </section>
<section>
 <section data-markdown>
                <script type="text/template">
##puppet

un gestor de la configuración

####¿para qué?

*para definir el estado de nuestra infraestructura de sistemas y automáticamente forzar dicho estado*

**automatización del proceso de entrega de software**

- provisionamiento de servidores físicos y virtuales
- orquestación
- reporting

                </script>
                </section>
<section data-markdown>
                <script type="text/template">
##puppet

####pros

libera tiempo en los proyectos

asegura la consistencia, fiabilidad y estabilidad del entorno

facilita una colaboración y comunicación estrecha entre administradores de sistemas y
desarrolladores

ayuda a entregar valor

####contras

hay que conocer ruby

problemas de escalado con decenas de miles de nodos

rápida evolución
                </script>
                </section>
<section data-markdown>
                <script type="text/template">
##puppet

####cómo funciona

definir

simular

obligar

informar
                </script>
                </section>
<section data-markdown>
                <script type="text/template">
##puppet

[¿quién lo usa?](https://puppetlabs.com/about/customers)

[![cern](./img/cern.jpg)](https://indico.cern.ch/event/220443/session/1/contribution/42/material/slides/1.pdf)

                </script>
                </section>
<section data-markdown>
                <script type="text/template">
##puppet

###patrón rol-perfil-módulo
![puppet_pattern.png](./img/puppet_pattern.png)


                </script>
                </section>
<section data-markdown>
                <script type="text/template">
##puppet

###en el ICANE...

- patrón rol/perfil

- módulos de la forja, propios y de terceros (git) gestionados por `librarian-puppet`

- `/etc/puppet/` en su propio repositorio git

- clasificación de nodos a partir de hechos (sin ENC)

- separación entre lógica (módulos) y datos en yaml (hiera)


                </script>
                </section>
<section data-markdown>

##puppet

###role
<pre><code class="ruby" data-trim>
      class role::appserver inherits role {
        notify {"Applying role::appserver": }

        contain profile::rhel
        contain profile::jdk
        contain profile::apache_tomcat

        Class['profile::rhel'] -> Class['profile::jdk']
         -> Class['profile::apache_tomcat']
      }
</code></pre>

                </section>
<section data-markdown>

##puppet

###profile
 <pre><code class="ruby" data-trim>
      class profile::rhel {
        notify {"Applying profile::rhel": }
        if str2bool("$firstdeploy") {
          class {'profile::remove_groups':
            stage => first,
          }
          contain profile::epel_install
          contain profile::packages_install
          Class['profile::epel_install'] ->
            Class['profile::packages_install']
          file {"/etc/facter/facts.d/firstdeploy.yaml":
            ensure => present,
            content => "---\nfirstdeploy: \"false\"\n"
          }
         }
        contain profile::inittab_install
      }
</code></pre>

                </section>
<section data-markdown>

##puppet

###datos
        ---
	groups_dev_group:
  	  gcm9998:
  	      ensure: present
  	      gid: 1003
  	  sas9999:
  	      ensure: present
  	      gid: 1004

	users_dev:
	    gcm9998:
 	       ensure: present
  	      uid: 1003
  	      gid: 1003
  	      password: '$6$N.L0QnbP$96GcSdfc.CLR46DPwsmMladmCMpdpj4MgabgBkzisnjD5T62MU5P2jse7PH86ExUIiojKMcPtZMTNXPI.y5Mt0'
      	  shell: '/bin/zsh'
     	   groups:
     	     - tomcat6
     	     - sudo
       	 comment: Mireya Gutierrez
     	   managehome: true
      	  ssh_authorized_keys:
      	      key_gcm9998_dev:
      	          type: 'ssh-rsa'
      	          key: 'AAAAB3NzaC1yc2EAAAADAQABAAABAQDVPimgbpTNuRYFx61KWWN8DAo0FZ8Xt42i+uAGYZ+wMztOvAjxJQAXWMXiQO0dyuV19JoforiwKuFYRylc472M5AAGpdrwhckEjpHN/mqwp9BGUfQ60R1Dn1ZfUI6tqYUMsZY95UgMv61kJv5gMa5ntozzmMB5XSCyz0tGZQfkO1TfB87OCqxojt7vm45B7Jc1st6p77U6vbqoIVQiS3jHKLA0o9NS5gAjAO3lv9QIojW3NpqkJgiw1R7zCRAa9ug617gU+fZuOYiWYjjtFe1LDoP4QWngPv+arSDGe9AHOBT9ajePKqvQSeyILg8quwO9hWXtWpdGRCa69m3yeooX'
    	sas9999:
    	    require: Package[zsh]
    	    uid: 1004
    	    gid: 1004
    	    password: '$6$qmPqlTucvvHsFA$07EJzeCsgMW2QeFqxiT5DXkPHERGpuVrKsXmB/SgxQFMtktWDMfo31FXgCfCPqcEHIr5Ixy22ux3cm7WLLfeJ.'
      	  shell: '/bin/zsh'
      	  groups:
     	       - tomcat6
     	       - sudo
    	    comment: Sofia Saiz
    	    managehome: true
     	   ssh_authorized_keys:
    	        key_sas9999_dev:
                type: 'ssh-rsa'
                key: 'AAAB3NzaC1yc2EAAAADAQABAAABAQC6C9AqEq619z8J6uJAI2Fny1GDjYsPRvn/eRmWNHcqwJdhy5ndItMCpGUqWp/vW/Zxtdy+tMHVpuOE9urTFFwUoPRwrQHpaos64n65x1YhJ+rChmiCLEGGDBrCEA9yRo3pWVB/uZ1koDMCk/h2/YgWPlkh9fL0rkGLU4Xu7GNXLECBqeC5oIyGfrJW3ZgZZsmJD9gi+PoPqDP+b1vuujEM+QMaop4Lr2hmc0IbwXQSmKzTZnPdqQACnI+l/qX6klKSRCsRq4dqVgRVcQKgYzKbBwoIC9vYhzdSU6oFGItisg5ROIQY16ichUsnLRwQZ7oulfeIMU2aa7oCaiWGs2r9'        		tomcat::ensure: 'stopped'
	tomcat::enable: false
	tomcat::version: '7'
	tomcat_server:
	  data:
	    ensure: 'running'
	    port: '8104'
	    java_home: '/usr/lib/jvm/java-1.7.0-openjdk-amd64'
	    setenv:
      		- 'JAVA_XMX="2048m"'
     		- 'JAVA_XX_MAXPERMSIZE="2048m"'
	        - 'ADD_JAVA_OPTS="-Djava.net.preferIPv4Stack=true -Djava.net.preferIPv4Addresses"'
	    services:
	      Catalina:
	        connectors:
	          http-8084:
	            port: '8084'
	            protocol: 'HTTP/1.1'
        	  ajp-8014:
        	    port: '8014'
        	    protocol: 'AJP/1.3'
	    listeners:
	       org.apache.catalina.core.AprLifecycleListener:
        	  ssl_engine: 'On'
	       org.apache.catalina.core.JasperListener: {}
	       org.apache.catalina.core.JreMemoryLeakPreventionListener: {}
	       org.apache.catalina.mbeans.GlobalResourcesLifecycleListener: {}
	       org.apache.catalina.core.ThreadLocalLeakPreventionListener: {}
	apache_vhost:
	  marhaus.icane.es:
	    docroot: '/var/www'
	    proxy_pass:
	      - path: '/data'
	        url: 'http://localhost:8084/data'
	      - path: '/metadata'
	        url: 'http://localhost:8085/metadata'
	      - path: '/dataman'
	        url: 'http://localhost:8086/dataman'
	      - path: '/gpecan'
	        url: 'http://localhost:8087/gpecan'
	      - path: '/manager/data'
	        url: 'http://localhost:8084/manager'
	      - path: '/manager/metadata'
	        url: 'http://localhost:8085/manager'
	      - path: '/dm/manager'
	        url: 'http://localhost:8086/manager'
	      - path: '/gc/manager'
	        url: 'http://localhost:8087/manager'

                </section>
</section>

                <section data-markdown>
                <script type="text/template">
## edición productiva



                </script>
                </section>
 <section data-markdown>
                <script type="text/template">
## el poder del texto plano

                </script>
                </section>



                <section>

                <section data-id="15">
                <div>

                    <a href="http://www.cantabria.es"><img alt="Logotipo DGOT"  src="./img/informatica500.png" style="max-width: none; max-height: none; color: rgb(255, 153, 0);  vertical-align:middle; " /> </a>
                    <p style="font-size:20px; text-align:center; margin-top: 1em"><span style="font-weight: bold;"><a href="https://github.com/icane/desarrollo-agil-sw">Acceso al repositorio del curso</a></span></p>

                    <p style="font-size:20px; text-align:center; margin-top: 1em"><span style="font-weight: bold;"><a href="http://about.me/predicador37">Miguel Expósito Martín</a></span></p>


                </div>
                </section>

            </div>

        </div>

        <script src="lib/js/head.min.js"></script>
        <script src="js/reveal.js"></script>

        <script>

            // Full list of configuration options available at:
            // https://github.com/hakimel/reveal.js#configuration
            Reveal.initialize({
                controls: true,
                progress: true,
		slideNumber: true,
                history: true,
                center: true,

                transition: 'slide', // none/fade/slide/convex/concave/zoom

                // Optional reveal.js plugins
                dependencies: [
                { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
                { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                { src: 'plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
                { src: 'plugin/zoom-js/zoom.js', async: true },
                { src: 'plugin/notes/notes.js', async: true }
                ]
            });

        </script>

    </body>
</html>
